
<!DOCTYPE html>
<html lang="it">
<head>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/login.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="wrapper fadeInDown">
        <div id="formContent">
            <!-- Tabs Titles -->
            <h2 class="active"> Login </h2>
            <!-- Icon -->
            <div class="fadeIn first">
            <img src="../img/logo_login_senza_background.png" />
            </div>

            <!-- Login Form -->
            
                <input type="text" id="login" class="fadeIn second" name="login" placeholder="email"  value="" >
                <input type="password" id="password" class="fadeIn third" name="login" placeholder="password" value="">
               <br> <button onclick="login();"  class="animazione" value="Log In">Log In</button>
                <div id="error" style="color:red"></div>
            <br>
            <!-- Remind Passowrd -->
            <div id="formFooter">
                <a class="underlineHover" href="#">Forgot Password?</a> <a class="underlineHover" href="#">Registrati</a>
            </div>

        </div>
    </div>

<script>
function login() {
    let email=document.getElementById('login');
    let password=document.getElementById('password');
    let error=document.getElementById('error');
    error.innerHTML='';

    let rc=fetch('http://localhost/cantieroni/API/Utente/check_login.php?username='+encodeURIComponent(email.value)+'&password='+encodeURIComponent(password.value),{credentials: 'include'})
		.then((response) => {
             if(response.ok) {   
                return response.json();
             }
             throw new Error(response.statusText);
        })
		.then((data) => {
                // Login effettuato
				document.location='index.html';            

		}).catch((err) => {
            error.innerHTML=err;
        });
    
}
</script>

</body>
</html>
<div id="formContent">

    <h2 class="active">Inserimento cantiere</h2>
    <!-- Icon -->
    <div>
        <img src="../img/logo_login_senza_background.png" />
    </div>

    <!-- Login Form -->
            
    <!--<input type="text" id="login" class="fadeIn second" name="login" placeholder="email"  value="" >
    <input type="password" id="password" class="fadeIn third" name="login" placeholder="password" value="">-->
    <input type="text" class="aggCampi" id="idNome" name="nome" placeholder="Nome">
    <input type="text" class="aggCampi" id="idIndirizzo" name="indirizzo" placeholder="Indirizzo">
    <input type="text" class="aggCampi" id="idCitta" name="citta" placeholder="CittÃ ">
    <input type="text" class="aggCampi" id="idProvincia" name="provincia" placeholder="Provincia">
    <label for="idDataInizio">Data di inizio:</label>
    <input type="date" class="aggCampi" id="idDataInizio" name="dataInizio" placeholder="Data inizio">
    <input type="text" class="aggCampi" id="idDescrizione" name="descrizione" placeholder="Descrizione">
    <input type="button" value="Aggiungi" onclick="aggiungiCantiere()">
    <div id="error" style="color:red"></div>
</div>
<script>
    class CantiereNew{
        constructor(nome, indirizzo, citta, provincia, data_inizio, descrizione) {
            this.nome = nome;
            this.indirizzo = indirizzo;
            this.citta = citta;
            this.provincia = provincia;
            this.data_inizio = data_inizio;
            this.descrizione = descrizione;
        }

    }

    function aggiungiCantiere() {
        let nome = document.getElementById("idNome").value;
        let indirizzo = document.getElementById("idIndirizzo").value;
        let citta = document.getElementById("idCitta").value;
        let provincia = document.getElementById("idProvincia").value;
        let data_inizio = document.getElementById("idDataInizio").value;
        let descrizione = document.getElementById("idDescrizione").value;
        error.innerHTML = '';

        let obj = new CantiereNew(nome, indirizzo, citta, provincia, data_inizio, descrizione);

        let rc2 = fetch('http://localhost/cantieroni/API/cantiere/create_new.php', { method: 'POST' ,credentials: 'include', headers: {
                'Accept': 'application/json',
                'Content-type': 'application/json'
            }, body: JSON.stringify(obj)})
            .then((response) => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error(response.statusText);
            })
            .then((data) => {
                document.reload();
            }).catch((err) => {
                error.innerHTML = err;
                console.log(err);
            });
    }

</script>

<!-- <script src="../js/cantieriAll.js"></script> -->
<!--<script src="../js/inserCantiere.js"></script>-->